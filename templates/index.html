{{define "indexPage"}}
<!DOCTYPE html>
<html lang="en"> 
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CallSign - The Ultimate Collection</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- THEME & COLOR VARIABLES --- */
        :root {
            --primary-glow: #7c3aed;
            --secondary-glow: #0ea5e9;
            /* Default to Dark Mode */
            --bg-main: #0F0F1B;
            --bg-card: rgba(26, 26, 39, 0.6);
            --bg-control: rgba(26, 26, 39, 0.8);
            --text-primary: #f8fafc;
            --text-secondary: #a1a1aa;
            --border-color: rgba(255, 255, 255, 0.1);
            --shadow-color: rgba(0,0,0,0.2);
            --bg-animated: radial-gradient(circle at 1% 1%, var(--primary-glow), transparent 30%),
                           radial-gradient(circle at 99% 99%, var(--secondary-glow), transparent 35%);
        }

        [data-theme="light"] {
            --bg-main: #f4f4f9;
            --bg-card: rgba(255, 255, 255, 0.6);
            --bg-control: #ffffff;
            --text-primary: #111827;
            --text-secondary: #6b7280;
            --border-color: rgba(0, 0, 0, 0.1);
            --shadow-color: rgba(0,0,0,0.1);
            --bg-animated: radial-gradient(circle at 1% 1%, #d8b4fe, transparent 35%),
                           radial-gradient(circle at 99% 99%, #bae6fd, transparent 40%);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        @keyframes backgroundPan {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        html { scroll-behavior: smooth; }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-main);
            color: var(--text-primary);
            background-image: var(--bg-animated);
            background-size: 300% 300%;
            animation: backgroundPan 25s ease infinite;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            transition: background-color 0.4s ease, color 0.4s ease;
        }

        .container { 
            max-width: 1200px; 
            width: 100%;
            margin: 0 auto; 
            padding: 40px 24px;
            flex-grow: 1;
        }
        
        .header-controls { display: flex; justify-content: flex-end; margin-bottom: 20px; }
        .theme-toggle { background: var(--bg-card); border: 1px solid var(--border-color); width: 44px; height: 44px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease; }
        .theme-toggle:hover { border-color: var(--primary-glow); }
        .theme-toggle .icon { font-size: 1.2rem; color: var(--text-secondary); }
        .moon-icon { display: none; }
        .sun-icon { display: none; }
        [data-theme="dark"] .moon-icon { display: block; }
        [data-theme="light"] .sun-icon { display: block; }

        .section-header { text-align: center; margin-bottom: 50px; }
        .section-header h2 { font-size: 2.8rem; font-weight: 900; background: linear-gradient(90deg, var(--text-primary), var(--text-secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 10px; animation: fadeInDown 1s ease-out; }
        .section-header p { font-size: 1.1rem; color: var(--text-secondary); max-width: 600px; margin: 0 auto; animation: fadeInUp 1s ease-out 0.2s forwards; }
        
        .callsign-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 2rem; margin-bottom: 80px; }

        @keyframes cardFadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .callsign-item {
            position: relative; 
            background: var(--bg-card);
            border: 1px solid var(--border-color); 
            border-radius: 16px;
            padding: 24px; 
            backdrop-filter: blur(12px);
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease, background-color 0.4s ease, border-color 0.4s ease;
            display: none; 
        }

        .callsign-item:hover { transform: translateY(-8px); box-shadow: 0 20px 40px var(--shadow-color), 0 0 30px var(--primary-glow); border-color: rgba(124, 58, 237, 0.5); }
        .callsign-item::before { content: ''; position: absolute; top: 0; left: -150%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent); transform: skewX(-30deg); transition: left 0.7s ease; }
        [data-theme="light"] .callsign-item::before { background: linear-gradient(90deg, transparent, rgba(0, 0, 0, 0.05), transparent); }
        .callsign-item:hover::before { left: 150%; }
        .callsign-item .info { display: flex; flex-direction: column; justify-content: space-between; height: 100%; }
        .callsign-item .info h3 { font-size: 1.5rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; }
        .quote-preview {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 24px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 100%;
        }
        .callsign-item .actions { display: flex; gap: 10px; margin-top: auto; flex-wrap: wrap; }
        .callsign-btn { background-color: transparent; border: 1px solid var(--border-color); border-radius: 8px; padding: 10px 16px; font-size: 0.9rem; font-weight: 600; color: var(--text-secondary); cursor: pointer; display: flex; align-items: center; gap: 8px; transition: all 0.2s ease; text-decoration: none; backdrop-filter: blur(5px); }
        .callsign-btn:hover { color: var(--text-primary); border-color: var(--secondary-glow); background-color: rgba(14, 165, 233, 0.1); }
        .btn-primary { background-color: var(--primary-glow); border-color: var(--primary-glow); color: #fff; }
        .btn-primary:hover { background-color: #6d28d9; border-color: #6d28d9; box-shadow: 0 0 15px rgba(124, 58, 237, 0.7); }

        .pagination-controls { display: flex; justify-content: center; align-items: center; gap: 8px; user-select: none; flex-wrap: wrap; }
        .pagination-btn, .page-number { background: var(--bg-control); border: 1px solid var(--border-color); color: var(--text-secondary); border-radius: 8px; width: 40px; height: 40px; display: flex; justify-content: center; align-items: center; cursor: pointer; transition: all 0.2s ease; }
        .pagination-btn:hover, .page-number:hover { color: var(--text-primary); border-color: var(--secondary-glow); }
        .page-number.active { color: #fff; background: var(--primary-glow); border-color: var(--primary-glow); font-weight: 700; cursor: default; }
        .pagination-btn.disabled { opacity: 0.5; pointer-events: none; }
        .page-ellipsis { color: var(--text-secondary); width: 20px; text-align: center; }
        
        .modal-overlay { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(10, 10, 20, 0.8); backdrop-filter: blur(8px); align-items: center; justify-content: center; opacity: 0; transition: opacity 0.3s ease; }
        [data-theme="light"] .modal-overlay { background-color: rgba(255, 255, 255, 0.8); }
        .modal-overlay.show { display: flex; opacity: 1; }
        .modal-content { background: var(--bg-card); border: 1px solid var(--border-color); padding: 40px; border-radius: 16px; width: 90%; max-width: 500px; text-align: center; position: relative; box-shadow: 0 25px 50px -12px var(--shadow-color); transform: scale(0.95); transition: transform 0.3s ease; }
        .modal-overlay.show .modal-content { transform: scale(1); }
        .modal-close-btn { color: var(--text-secondary); position: absolute; top: 15px; right: 20px; font-size: 28px; font-weight: bold; cursor: pointer; transition: color 0.2s, transform 0.2s; }
        .modal-close-btn:hover { color: var(--text-primary); transform: rotate(90deg); }
        #modalQuoteText { font-size: 1.5rem; line-height: 1.6; font-weight: 500; color: var(--text-primary); background: linear-gradient(90deg, var(--primary-glow), var(--secondary-glow)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        [data-theme="light"] #modalQuoteText { background: linear-gradient(90deg, #6d28d9, #0284c7); -webkit-background-clip: text; }
        
        .site-footer { text-align: center; padding: 40px 20px; margin-top: auto; color: var(--text-secondary); font-size: 0.9rem; transition: color 0.4s ease; }

        @keyframes fadeInDown { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        @media (max-width: 992px) { .callsign-grid { grid-template-columns: repeat(2, 1fr); } }
        @media (max-width: 768px) { .container { padding: 20px 16px; } .section-header h2 { font-size: 2.2rem; } .section-header p { font-size: 1rem; } .callsign-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

    <div class="container">
        <div class="header-controls">
            <div class="theme-toggle" id="theme-toggle" title="Toggle Theme">
                <i class="fas fa-moon icon moon-icon"></i>
                <i class="fas fa-sun icon sun-icon"></i>
            </div>
        </div>

        <section id="top-callsigns">
            <div class="section-header">
                <h2>Explore The Collection</h2>
                <p>Discover and equip the most iconic CallSigns. Each one tells a story.</p>
            </div>
            
            <div class="callsign-grid">
                {{range .callsignData}}
                <div class="callsign-item">
                    <div class="info">
                        <div>
                            <h3>{{.Type}}</h3>
                            <p class="quote-preview">{{.Quote}}</p>
                        </div>
                        <div class="actions">
                            <button class="callsign-btn preview-btn" data-quote="{{.Quote}}">
                                Preview
                            </button>
                            <a href="/set-callsign/{{.ID}}" class="callsign-btn btn-primary">
                                <i class="fa-solid fa-star"></i> Subscribe
                            </a>
                        </div>
                    </div>
                </div>
                {{end}}
            </div>

            <div class="pagination-controls" id="pagination-controls">
                <div class="pagination-btn" id="first-btn"><i class="fa-solid fa-angles-left"></i></div>
                <div class="pagination-btn" id="prev-btn"><i class="fa-solid fa-chevron-left"></i></div>
                <div id="page-numbers" class="pagination-controls"></div>
                <div class="pagination-btn" id="next-btn"><i class="fa-solid fa-chevron-right"></i></div>
                <div class="pagination-btn" id="last-btn"><i class="fa-solid fa-angles-right"></i></div>
            </div>
        </section>
    </div>

    <footer class="site-footer">
        <p>&copy; 2023 Lamahuraan. All Rights Reserved.</p>
    </footer>

    <div id="previewModal" class="modal-overlay">
        <div class="modal-content">
            <span class="modal-close-btn">&times;</span>
            <p id="modalQuoteText"></p>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- THEME SWITCHER LOGIC ---
            const themeToggle = document.getElementById('theme-toggle');
            const docElement = document.documentElement;
            const applyTheme = (theme) => {
                docElement.setAttribute('data-theme', theme);
                localStorage.setItem('theme', theme);
            };
            themeToggle.addEventListener('click', () => {
                const currentTheme = docElement.getAttribute('data-theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                applyTheme(newTheme);
            });
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
            if (savedTheme) { applyTheme(savedTheme); } 
            else if (prefersDark) { applyTheme('dark'); } 
            else { applyTheme('light'); }

            // --- PAGINATION LOGIC ---
            const itemsPerPage = 9;
            const allItems = Array.from(document.querySelectorAll('.callsign-item'));
            const totalPages = Math.ceil(allItems.length / itemsPerPage);
            let currentPage = 1;
            const pageNumbersContainer = document.getElementById('page-numbers');
            const firstBtn = document.getElementById('first-btn');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const lastBtn = document.getElementById('last-btn');
            
            function displayPage(page) {
                if (page < 1 || page > totalPages) return;
                currentPage = page;
                const startIndex = (page - 1) * itemsPerPage;
                const endIndex = startIndex + itemsPerPage;
                
                allItems.forEach(item => item.style.display = 'none');
                const pageItems = allItems.slice(startIndex, endIndex);
                pageItems.forEach((item, index) => {
                    item.style.display = 'flex';
                    item.style.animation = 'none';
                    void item.offsetWidth; 
                    item.style.animation = `cardFadeIn 0.5s ease-out ${index * 0.1}s forwards`;
                });
                updatePaginationControls();
            }

            function createPageElement(type, value) {
                if (type === 'ellipsis') {
                    const ellipsis = document.createElement('span');
                    ellipsis.className = 'page-ellipsis';
                    ellipsis.textContent = '...';
                    return ellipsis;
                }
                const pageBtn = document.createElement('div');
                pageBtn.className = 'page-number';
                pageBtn.textContent = value;
                if (value === currentPage) pageBtn.classList.add('active');
                pageBtn.addEventListener('click', () => displayPage(value));
                return pageBtn;
            }

            function updatePaginationControls() {
                pageNumbersContainer.innerHTML = '';
                const pageNeighbours = 1;
                const totalNumbers = (pageNeighbours * 2) + 3;
                const totalBlocks = totalNumbers + 2;
                if (totalPages > totalBlocks) {
                    const startPage = Math.max(2, currentPage - pageNeighbours);
                    const endPage = Math.min(totalPages - 1, currentPage + pageNeighbours);
                    pageNumbersContainer.appendChild(createPageElement('number', 1));
                    if (startPage > 2) pageNumbersContainer.appendChild(createPageElement('ellipsis'));
                    for (let i = startPage; i <= endPage; i++) pageNumbersContainer.appendChild(createPageElement('number', i));
                    if (endPage < totalPages - 1) pageNumbersContainer.appendChild(createPageElement('ellipsis'));
                    pageNumbersContainer.appendChild(createPageElement('number', totalPages));
                } else {
                    for (let i = 1; i <= totalPages; i++) pageNumbersContainer.appendChild(createPageElement('number', i));
                }
                firstBtn.classList.toggle('disabled', currentPage === 1);
                prevBtn.classList.toggle('disabled', currentPage === 1);
                nextBtn.classList.toggle('disabled', currentPage === totalPages);
                lastBtn.classList.toggle('disabled', currentPage === totalPages);
            }

            firstBtn.addEventListener('click', () => displayPage(1));
            prevBtn.addEventListener('click', () => displayPage(currentPage - 1));
            nextBtn.addEventListener('click', () => displayPage(currentPage + 1));
            lastBtn.addEventListener('click', () => displayPage(totalPages));
            if (totalPages > 0) displayPage(1);

            // --- Modal Logic ---
            const modal = document.getElementById('previewModal');
            const modalText = document.getElementById('modalQuoteText');
            const closeBtn = document.querySelector('.modal-close-btn');
            function openModal(quote) { modalText.textContent = quote; modal.classList.add('show'); }
            function closeModal() { modal.classList.remove('show'); }
            document.querySelectorAll('.preview-btn').forEach(button => { button.addEventListener('click', function() { openModal(this.dataset.quote); }); });
            closeBtn.addEventListener('click', closeModal);
            modal.addEventListener('click', function(event) { if (event.target === modal) { closeModal(); } });
        });
    </script>
</body>
</html>
{{end}}